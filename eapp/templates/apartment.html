{% extends 'layout/base.html' %}

{% block content %}
<div class="container mt-120 mb-5">
    <div class="row">
        <div class="col-md-6">
            <div class="card shadow border-0">
                <img src="{{ apartment.image }}"
                     class="img-fluid rounded"
                     alt="{{ apartment.ma_can_ho }}"
                     style="width: 100%; height: 450px; object-fit: cover;">
            </div>
        </div>

        <div class="col-md-6">
            <h2 class="text-primary font-weight-bold mb-3">{{ apartment.ma_can_ho }}</h2>

            <h3 class="text-danger mb-4">
                {{ "{:,.0f}".format(apartment.gia_thue) }} VNĐ
                <small class="text-muted" style="font-size: 0.6em">/ tháng</small>
            </h3>

            <ul class="list-unstyled mb-4">
                <li class="mb-2"><strong>Diện tích:</strong> {{ apartment.dien_tich }} m²</li>
                <li class="mb-2"><strong>Địa chỉ:</strong> Tầng {{ apartment.ma_can_ho[1] }}, Tòa nhà Apartment Building
                </li>
                <li class="mb-2">
                    <strong>Trạng thái:</strong>
                    {% if apartment.trang_thai.name == 'CONTRONG' %}
                    <span class="badge bg-success p-2">Còn trống</span>
                    {% elif apartment.trang_thai.name == 'DANGTHUE' %}
                    <span class="badge bg-danger p-2">Đang thuê</span>
                    {% else %}
                    <span class="badge bg-warning text-dark p-2">Đang bảo trì</span>
                    {% endif %}
                </li>
            </ul>

            <hr>

            <div class="card bg-light mb-3 p-4 border-0 rounded">
                <h5 class="text-primary mb-3 font-weight-bold">
                    <i class="fas fa-calendar-alt"></i> ĐĂNG KÝ THUÊ
                </h5>

                <form action="/booking" method="post">

                    <input type="hidden" name="apartment_id" value="{{ apartment.id }}">

                    <div class="form-row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="small font-weight-bold">Ngày dọn vào:</label>
                                <input type="date" class="form-control" name="start_date" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="small font-weight-bold">Thuê bao lâu (Tháng):</label>
                                <input type="number" class="form-control" name="duration" min="1" max="12" value="6"
                                       required>
                            </div>
                        </div>
                    </div>

                    <div class="mt-2">
                        {% if apartment.trang_thai.name == 'CONTRONG' %}
                        {% if current_user.is_authenticated %}
                        <button type="submit" class="btn btn-danger btn-block shadow font-weight-bold py-2" onclick="notifyAdmin()">
                            XÁC NHẬN ĐẶT PHÒNG
                        </button>
                        {% else %}
                        <a href="/login" class="btn btn-warning btn-block text-white">
                            Đăng nhập để đặt phòng
                        </a>
                        {% endif %}
                        {% else %}
                        <button type="button" class="btn btn-secondary btn-block" disabled>
                            TẠM HẾT PHÒNG
                        </button>
                        {% endif %}
                    </div>
                </form>
            </div>
            <div class="mt-3">
                <h5>Mô tả chi tiết:</h5>
                <p class="text-justify text-muted">
                    Căn hộ tiện nghi, view đẹp, an ninh tốt. Phù hợp cho hộ gia đình hoặc nhóm bạn.
                </p>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}